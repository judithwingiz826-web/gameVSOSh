# GDD: Math RPG Hub

## 1) Видение и продуктовая цель
**Жанр:** образовательная RPG с короткими сессиями, 3D-хабом и сезонным мета-прогрессом.  
**ЦА:** школьники/студенты и взрослые, которые хотят системно прокачать математику через игровой цикл.  
**Ключевая цель:** превратить регулярную практику математики в устойчивую привычку за счёт понятного прогресса, «боссов», коллекционирования и социальных/сезонных целей.

---

## 2) Core Loop (основной игровой цикл)
1. **Вход в 3D-хаб** → игрок видит активные цели недели, рекомендованный квест и прогресс ранга.  
2. **Выбор зоны/квеста** (Алгебра, Геометрия, Комбинаторика, Числа) → запуск учебной миссии на 3–10 минут.  
3. **Решение задач**: базовые и комбинированные задания, подсказки с ценой (штраф по награде/рейтингу).  
4. **Фидбек после миссии**: точность, время, использованные техники, ошибки, персональная рекомендация «что учить дальше».  
5. **Награды и рост**: XP, валюты, очки навыков, трофеи/«доказательства», прогресс сезонного пропуска.  
6. **Реинвест в мету**: прокачка дерева навыков, выбор следующего квеста/челленджа, подготовка к мат-боссу.

**Дизайн-принципы loop-а:**
- Один цикл должен укладываться в короткую сессию и давать ощущение завершённости.
- Каждая сессия должна сдвигать минимум 1 индикатор прогресса (ранг, навык, сезон, коллекция, недельная цель).
- Ошибка — это источник обучения: игрок получает разбор и «next best action», а не только оценку.

---

## 3) Долгосрочный прогресс и мета-цели

### 3.1 Прогресс аккаунта
- **Уровень игрока (Account Level):** растёт от общей XP, открывает косметику, доступ к продвинутым зонам и сезонам.
- **MMR/рейтинг мастерства по темам:** отдельный показатель по 4 доменам (Алгебра, Геометрия, Комбинаторика, Числа).
- **Ранги:** Бронза → Серебро → Золото → Платина → Мастер → Грандмастер (по сумме MMR и босс-прохождений).

### 3.2 Мета-цели (6–12 недель)
- Закрыть **все сюжетные арки** зон (линейки учебных квестов).
- Достичь целевого ранга в 1–2 темах.
- Собрать тематические **коллекции доказательств/трофеев**.
- Пройти сезонный набор челленджей и получить уникальную награду.

### 3.3 Сезонная структура
- Длина сезона: 6–8 недель.
- В каждом сезоне:
  - новая мини-кампания;
  - 1–2 новых мат-босса;
  - сезонные модификаторы (ограничения по времени, запрет некоторых подсказок, комбинированные задачи);
  - сезонный рейтинг и косметические награды.

---

## 4) RPG-элементы

### 4.1 Дерево навыков по математическим темам
**Формат:** 4 ветви, каждая содержит базовые, продвинутые и синергетические узлы.

- **Алгебра:** преобразования выражений, уравнения/неравенства, функции, системы.
- **Геометрия:** углы/треугольники, подобие, окружности, координатные методы.
- **Комбинаторика:** правила суммы/произведения, размещения/сочетания, рекуррентные схемы.
- **Числа:** делимость, НОД/НОК, сравнения, простые числа, модульная арифметика.

**Типы узлов навыков:**
- **Accuracy-перки:** +точность, снижение штрафа за ошибки в конкретном типе задач.
- **Speed-перки:** +временной бонус, медленнее падает рейтинг при тайм-ауте.
- **Insight-перки:** улучшенные подсказки, раннее предупреждение о типичной ошибке.
- **Boss-перки:** усиление против мульти-темных задач (комбо-коэффициент награды).

### 4.2 Ранги и дивизионы
- Ранг обновляется еженедельно на основе:
  - % верных ответов,
  - средней сложности решённых задач,
  - времени решения,
  - успехов в мат-боссах.
- Дивизионные награды: рамки профиля, титулы, визуальные эффекты в хабе.

### 4.3 Сезонные челленджи
- **Daily:** 1 короткая цель (например, «реши 7 задач на системы уравнений»).
- **Weekly:** 3–5 комплексных целей (точность + скорость + конкретная тема).
- **Seasonal Milestones:** длинные цепочки с уникальными трофеями и сюжетными объектами в хабе.

### 4.4 Коллекции «доказательств»/трофеев
- **Доказательства** — коллекционные карточки/артефакты за корректное решение ключевых типов задач.
- **Трофеи** — редкие награды за мат-боссов, винстрики, безошибочные недели.
- Коллекции дают:
  - косметику;
  - пассивные бонусы к XP;
  - доступ к «архивным» квестам повышенной сложности.

---

## 5) 3D-хаб и тематические зоны

### 5.1 Общая структура хаба
Хаб — центральное пространство, где игрок:
- получает рекомендации,
- выбирает активность,
- отслеживает прогресс,
- взаимодействует с NPC-наставниками.

**Ключевые точки хаба:**
- **Панель прогресса:** уровень, ранг, недельные цели, сезонный прогресс.
- **Порталы зон:** 4 тематических входа.
- **Зал трофеев:** визуализация коллекций доказательств/трофеев.
- **Арена боссов:** доступна после выполнения условий.

### 5.2 Зоны
1. **Алгебра (Кристальный Архив):** квесты на преобразования, графики, системы.  
2. **Геометрия (Храм Форм):** квесты на доказательства, построения, свойства фигур.  
3. **Комбинаторика (Сад Вариантов):** квесты на перебор, стратегии подсчёта, рекурсию.  
4. **Числа (Кузница Делимости):** квесты на арифметику, делимость, модульные техники.

**Принцип открытия:**
- базовый доступ открыт сразу;
- продвинутые квесты зоны открываются через mastery-требования и сюжетные узлы.

---

## 6) Мат-боссы (комплексные испытания)

### 6.1 Роль боссов
Мат-боссы — кульминация прогресса, где нужно комбинировать несколько техник в условиях ограниченного времени.

### 6.2 Формат боя
- 3 фазы (разогрев → комбинированные задачи → финальный стресс-тест).
- Таймер на каждую фазу + общий лимит.
- Ограничение подсказок или рост их стоимости в финале.
- Победа требует не только правильности, но и стабильного темпа.

### 6.3 Примеры боссов
- **«Архитектор Систем»** (Алгебра + Числа): системы уравнений + делимость.
- **«Куратор Симметрий»** (Геометрия + Алгебра): геометрические свойства + функциональные зависимости.
- **«Мастер Перестановок»** (Комбинаторика + Числа): подсчёт + модульные ограничения.

### 6.4 Награды за боссов
- Уникальные трофеи и редкие «доказательства».
- Крупный прирост рейтинга темы.
- Разблокировка элитных квестов и визуальных изменений хаба.

---

## 7) Баланс сложности

### 7.1 Адаптивная сложность
- Система оценивает точность, время и паттерн ошибок.
- Следующие задания подбираются так, чтобы держать игрока в «зоне продуктивного вызова».

### 7.2 Слои сложности
- **Story:** низкий порог входа, щедрые подсказки.
- **Standard:** основной режим прогресса.
- **Challenge:** меньше подсказок, выше штраф за ошибку.
- **Boss Mode:** мульти-темные цепочки и жёсткие таймеры.

### 7.3 Анти-фрустрация
- «Мягкое поражение»: частичные награды за прогресс в фазах.
- Рекомендации по восстановлению: 1–2 коротких квеста перед повтором босса.
- Пороговые бонусы за серию попыток без успеха (поддержка мотивации).

---

## 8) Экономика наград
- **XP:** общий прогресс аккаунта.
- **Skill Points:** очки в дерево навыков.
- **Season Tokens:** валюта сезона для косметики/ускорителей.
- **Boss Sigils:** редкий ресурс для элитных активностей.

**Принципы награждения:**
- Вознаграждать и точность, и скорость, но с приоритетом качества решения.
- Поддерживать регулярные короткие входы (daily streak без чрезмерного наказания за пропуск).
- Давать «видимый прогресс» после любой сессии.

---

## 9) UX-фокус на удержание

### 9.1 Короткие сессии
- Рекомендуемая длина: 5–12 минут.
- Быстрый старт в 1–2 клика из хаба.
- «Resume-поток» для незавершённых квестов.

### 9.2 Визуальный прогресс
- Всегда видны: текущий ранг, прогресс уровня, ближайшая награда.
- В хабе появляются визуальные апгрейды по мере развития игрока.

### 9.3 Недельные цели
- 3 приоритетные цели в начале недели с трекером выполнения.
- Комбинация поведенческих и учебных KPI:
  - N сессий,
  - точность в выбранной теме,
  - 1 попытка мат-босса.

### 9.4 Персональные рекомендации
- После каждой сессии: «что дальше» (1 основной и 1 альтернативный маршрут).
- Рекомендации учитывают слабые места, темп, и цели сезона.
- Для возврата неактивных игроков: мягкий «камбэк-путь» с ускоренным восстановлением контекста.

---

## 10) KPI и метрики успеха
- **D1 / D7 / D30 retention**.
- Среднее число сессий в неделю на активного игрока.
- Доля игроков, завершивших недельные цели.
- Конверсия в первую победу над мат-боссом.
- Рост точности и времени решения по доменам.
- Доля игроков, закрывших хотя бы 1 коллекцию за сезон.

---

## 11) Roadmap (высокоуровнево)
1. **MVP (4–6 недель):** core loop, 2 зоны, базовый ранг, простые коллекции, 1 босс.  
2. **Версия 1.0:** полный 3D-хаб, 4 зоны, дерево навыков, сезонный контент.  
3. **LiveOps:** новые сезоны, боссы, расширение коллекций и социальные функции.
